<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Financial Planning Calculator</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;
        
        // Input component defined outside to prevent re-creation
        const InputGroup = ({ label, value, onChange, prefix = '$' }) => (
            <div className="mb-3">
                <label className="block text-sm font-medium text-gray-700 mb-1">{label}</label>
                <div className="relative">
                    {prefix && <span className="absolute left-3 top-2 text-gray-500">{prefix}</span>}
                    <input
                        type="number"
                        value={value}
                        onChange={(e) => onChange(parseFloat(e.target.value) || 0)}
                        className="w-full pl-8 pr-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                    />
                </div>
            </div>
        );
        
        // Lucide React icons as inline SVG components
        const DollarSign = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
            </svg>
        );
        
        const TrendingUp = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                <polyline points="17 6 23 6 23 12"></polyline>
            </svg>
        );
        
        const TrendingDown = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="23 18 13.5 8.5 8.5 13.5 1 6"></polyline>
                <polyline points="17 18 23 18 23 12"></polyline>
            </svg>
        );
        
        const Baby = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M9 12h.01"></path>
                <path d="M15 12h.01"></path>
                <path d="M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5"></path>
                <path d="M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1"></path>
            </svg>
        );
        
        const Users = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
        );

        function FamilyFinancialCalculator() {
            const [currentYear] = useState(new Date().getFullYear());
            
            // Current financial situation
            const [currentIncome, setCurrentIncome] = useState({
                salary1: 300000,
                salary2: 130000,
                otherIncome: 0
            });
            
            // Current expenses (with 1 child)
            const [currentExpenses, setCurrentExpenses] = useState({
                housing: 3600,
                utilities: 300,
                groceries: 800,
                transportation: 500,
                insurance: 400,
                childcare1: 2820,
                healthcare: 300,
                savings: 3200,
                entertainment: 1100,
                miscellaneous: 500
            });
            
            // Taxes and pre-tax deductions (monthly)
            const [taxesAndDeductions, setTaxesAndDeductions] = useState({
                federal401k: 0, // Pre-tax 401k contribution
                healthInsurance: 0, // Pre-tax health insurance premium
                hsa: 0, // Pre-tax HSA contribution
                federalTaxRate: 24, // Effective federal tax rate as percentage
                stateTaxRate: 5, // State tax rate as percentage
                ficaRate: 7.65, // FICA (Social Security + Medicare) - typically 7.65%
                otherPreTax: 0 // Other pre-tax deductions
            });
            
            // Additional costs for second child
            const [secondChildCosts, setSecondChildCosts] = useState({
                childcare: 2820,
                diapers: 80,
                formula: 150,
                clothing: 100,
                medical: 100,
                activities: 50,
                savingsContribution: 200
            });
            
            // Assumptions
            const [assumptions, setAssumptions] = useState({
                incomeGrowth: 3,
                expenseGrowth: 2.5,
                childcareDiscount: 10,
                monthsUntilBaby: 0,
                maternityLeaveMonths: 3,
                maternityLeavePay: 60
            });

            // Calculate totals
            const calculateYearlyProjection = (year) => {
                const yearOffset = year - currentYear;
                const growthMultiplier = Math.pow(1 + assumptions.incomeGrowth / 100, yearOffset);
                const expenseMultiplier = Math.pow(1 + assumptions.expenseGrowth / 100, yearOffset);
                
                // Gross Income calculation
                let grossIncome = (currentIncome.salary1 + currentIncome.salary2 + currentIncome.otherIncome) * growthMultiplier;
                
                // Adjust for maternity leave if applicable
                const babyArrivalYear = currentYear + Math.floor(assumptions.monthsUntilBaby / 12);
                if (year === babyArrivalYear && assumptions.monthsUntilBaby < 12) {
                    const leaveLoss = (currentIncome.salary2 * (1 - assumptions.maternityLeavePay / 100) * assumptions.maternityLeaveMonths) / 12;
                    grossIncome -= leaveLoss * growthMultiplier;
                }
                
                // Calculate monthly pre-tax deductions
                const monthlyPreTax = (
                    taxesAndDeductions.federal401k +
                    taxesAndDeductions.healthInsurance +
                    taxesAndDeductions.hsa +
                    taxesAndDeductions.otherPreTax
                );
                const annualPreTax = monthlyPreTax * 12;
                
                // Taxable income (after pre-tax deductions)
                const taxableIncome = grossIncome - annualPreTax;
                
                // Calculate taxes
                const federalTax = taxableIncome * (taxesAndDeductions.federalTaxRate / 100);
                const stateTax = taxableIncome * (taxesAndDeductions.stateTaxRate / 100);
                const ficaTax = taxableIncome * (taxesAndDeductions.ficaRate / 100);
                const totalTaxes = federalTax + stateTax + ficaTax;
                
                // Net take-home income
                const netIncome = grossIncome - annualPreTax - totalTaxes;
                
                // Base expenses (with 1 child)
                let totalExpenses = Object.values(currentExpenses).reduce((sum, val) => sum + val, 0) * 12 * expenseMultiplier;
                
                // Add second child costs if baby has arrived
                const babyAge = year - babyArrivalYear;
                if (babyAge >= 0) {
                    let childCosts = 0;
                    
                    // Childcare with sibling discount
                    const discountedChildcare = secondChildCosts.childcare * (1 - assumptions.childcareDiscount / 100);
                    childCosts += discountedChildcare * 12;
                    
                    // Diapers (assume 3 years)
                    if (babyAge < 3) {
                        childCosts += secondChildCosts.diapers * 12;
                    }
                    
                    // Formula (assume 1 year)
                    if (babyAge < 1) {
                        childCosts += secondChildCosts.formula * 12;
                    }
                    
                    // Other ongoing costs
                    childCosts += (secondChildCosts.clothing + secondChildCosts.medical + 
                                   secondChildCosts.activities + secondChildCosts.savingsContribution) * 12;
                    
                    totalExpenses += childCosts * expenseMultiplier;
                }
                
                return {
                    year,
                    grossIncome,
                    preTaxDeductions: annualPreTax,
                    taxes: totalTaxes,
                    netIncome,
                    expenses: totalExpenses,
                    netSavings: netIncome - totalExpenses,
                    hasSecondChild: babyAge >= 0
                };
            };

            const projections = Array.from({ length: 5 }, (_, i) => 
                calculateYearlyProjection(currentYear + i)
            );

            const formatCurrency = (value) => {
                return new Intl.NumberFormat('en-US', {
                    style: 'currency',
                    currency: 'USD',
                    minimumFractionDigits: 0,
                    maximumFractionDigits: 0
                }).format(value);
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 p-4">
                    <div className="max-w-7xl mx-auto">
                        <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
                            <div className="flex items-center gap-3 mb-4">
                                <Users />
                                <h1 className="text-3xl font-bold text-gray-800">Family Financial Planning Calculator</h1>
                            </div>
                            <p className="text-gray-600">Plan your finances for growing from 1 child to 2</p>
                        </div>

                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                            {/* Current Income */}
                            <div className="bg-white rounded-lg shadow-lg p-6">
                                <h2 className="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                                    <DollarSign />
                                    Annual Income
                                </h2>
                                <InputGroup 
                                    label="Salary 1" 
                                    value={currentIncome.salary1}
                                    onChange={(val) => setCurrentIncome({...currentIncome, salary1: val})}
                                />
                                <InputGroup 
                                    label="Salary 2" 
                                    value={currentIncome.salary2}
                                    onChange={(val) => setCurrentIncome({...currentIncome, salary2: val})}
                                />
                                <InputGroup 
                                    label="Other Income" 
                                    value={currentIncome.otherIncome}
                                    onChange={(val) => setCurrentIncome({...currentIncome, otherIncome: val})}
                                />
                            </div>

                            {/* Current Monthly Expenses */}
                            <div className="bg-white rounded-lg shadow-lg p-6">
                                <h2 className="text-xl font-bold text-gray-800 mb-4">Current Monthly Expenses (1 Child)</h2>
                                <div className="grid grid-cols-2 gap-x-4">
                                    <InputGroup 
                                        label="Housing" 
                                        value={currentExpenses.housing}
                                        onChange={(val) => setCurrentExpenses({...currentExpenses, housing: val})}
                                    />
                                    <InputGroup 
                                        label="Utilities" 
                                        value={currentExpenses.utilities}
                                        onChange={(val) => setCurrentExpenses({...currentExpenses, utilities: val})}
                                    />
                                    <InputGroup 
                                        label="Groceries" 
                                        value={currentExpenses.groceries}
                                        onChange={(val) => setCurrentExpenses({...currentExpenses, groceries: val})}
                                    />
                                    <InputGroup 
                                        label="Transportation" 
                                        value={currentExpenses.transportation}
                                        onChange={(val) => setCurrentExpenses({...currentExpenses, transportation: val})}
                                    />
                                    <InputGroup 
                                        label="Insurance" 
                                        value={currentExpenses.insurance}
                                        onChange={(val) => setCurrentExpenses({...currentExpenses, insurance: val})}
                                    />
                                    <InputGroup 
                                        label="Childcare (Child 1)" 
                                        value={currentExpenses.childcare1}
                                        onChange={(val) => setCurrentExpenses({...currentExpenses, childcare1: val})}
                                    />
                                    <InputGroup 
                                        label="Healthcare" 
                                        value={currentExpenses.healthcare}
                                        onChange={(val) => setCurrentExpenses({...currentExpenses, healthcare: val})}
                                    />
                                    <InputGroup 
                                        label="Savings/401k" 
                                        value={currentExpenses.savings}
                                        onChange={(val) => setCurrentExpenses({...currentExpenses, savings: val})}
                                    />
                                    <InputGroup 
                                        label="Entertainment" 
                                        value={currentExpenses.entertainment}
                                        onChange={(val) => setCurrentExpenses({...currentExpenses, entertainment: val})}
                                    />
                                    <InputGroup 
                                        label="Miscellaneous" 
                                        value={currentExpenses.miscellaneous}
                                        onChange={(val) => setCurrentExpenses({...currentExpenses, miscellaneous: val})}
                                    />
                                </div>
                            </div>

                            {/* Second Child Costs */}
                            <div className="bg-white rounded-lg shadow-lg p-6">
                                <h2 className="text-xl font-bold text-gray-800 mb-4 flex items-center gap-2">
                                    <Baby />
                                    Additional Monthly Costs (Child 2)
                                </h2>
                                <InputGroup 
                                    label="Childcare" 
                                    value={secondChildCosts.childcare}
                                    onChange={(val) => setSecondChildCosts({...secondChildCosts, childcare: val})}
                                />
                                <InputGroup 
                                    label="Diapers (0-3 years)" 
                                    value={secondChildCosts.diapers}
                                    onChange={(val) => setSecondChildCosts({...secondChildCosts, diapers: val})}
                                />
                                <InputGroup 
                                    label="Formula (0-1 year)" 
                                    value={secondChildCosts.formula}
                                    onChange={(val) => setSecondChildCosts({...secondChildCosts, formula: val})}
                                />
                                <InputGroup 
                                    label="Clothing" 
                                    value={secondChildCosts.clothing}
                                    onChange={(val) => setSecondChildCosts({...secondChildCosts, clothing: val})}
                                />
                                <InputGroup 
                                    label="Medical" 
                                    value={secondChildCosts.medical}
                                    onChange={(val) => setSecondChildCosts({...secondChildCosts, medical: val})}
                                />
                                <InputGroup 
                                    label="Activities" 
                                    value={secondChildCosts.activities}
                                    onChange={(val) => setSecondChildCosts({...secondChildCosts, activities: val})}
                                />
                                <InputGroup 
                                    label="College/Savings" 
                                    value={secondChildCosts.savingsContribution}
                                    onChange={(val) => setSecondChildCosts({...secondChildCosts, savingsContribution: val})}
                                />
                            </div>

                            {/* Taxes and Pre-Tax Deductions */}
                            <div className="bg-white rounded-lg shadow-lg p-6">
                                <h2 className="text-xl font-bold text-gray-800 mb-4">Taxes & Pre-Tax Deductions</h2>
                                <div className="mb-4 pb-4 border-b border-gray-200">
                                    <h3 className="font-semibold text-gray-700 mb-3">Monthly Pre-Tax Deductions</h3>
                                    <InputGroup 
                                        label="401k Contributions" 
                                        value={taxesAndDeductions.federal401k}
                                        onChange={(val) => setTaxesAndDeductions({...taxesAndDeductions, federal401k: val})}
                                    />
                                    <InputGroup 
                                        label="Health Insurance Premium" 
                                        value={taxesAndDeductions.healthInsurance}
                                        onChange={(val) => setTaxesAndDeductions({...taxesAndDeductions, healthInsurance: val})}
                                    />
                                    <InputGroup 
                                        label="HSA Contribution" 
                                        value={taxesAndDeductions.hsa}
                                        onChange={(val) => setTaxesAndDeductions({...taxesAndDeductions, hsa: val})}
                                    />
                                    <InputGroup 
                                        label="Other Pre-Tax" 
                                        value={taxesAndDeductions.otherPreTax}
                                        onChange={(val) => setTaxesAndDeductions({...taxesAndDeductions, otherPreTax: val})}
                                    />
                                </div>
                                <div>
                                    <h3 className="font-semibold text-gray-700 mb-3">Tax Rates (%)</h3>
                                    <InputGroup 
                                        label="Effective Federal Tax Rate" 
                                        value={taxesAndDeductions.federalTaxRate}
                                        onChange={(val) => setTaxesAndDeductions({...taxesAndDeductions, federalTaxRate: val})}
                                        prefix="%"
                                    />
                                    <InputGroup 
                                        label="State Tax Rate" 
                                        value={taxesAndDeductions.stateTaxRate}
                                        onChange={(val) => setTaxesAndDeductions({...taxesAndDeductions, stateTaxRate: val})}
                                        prefix="%"
                                    />
                                    <InputGroup 
                                        label="FICA Rate" 
                                        value={taxesAndDeductions.ficaRate}
                                        onChange={(val) => setTaxesAndDeductions({...taxesAndDeductions, ficaRate: val})}
                                        prefix="%"
                                    />
                                </div>
                            </div>

                            {/* Assumptions */}
                            <div className="bg-white rounded-lg shadow-lg p-6">
                                <h2 className="text-xl font-bold text-gray-800 mb-4">Assumptions</h2>
                                <InputGroup 
                                    label="Annual Income Growth (%)" 
                                    value={assumptions.incomeGrowth}
                                    onChange={(val) => setAssumptions({...assumptions, incomeGrowth: val})}
                                    prefix="%"
                                />
                                <InputGroup 
                                    label="Annual Expense Growth (%)" 
                                    value={assumptions.expenseGrowth}
                                    onChange={(val) => setAssumptions({...assumptions, expenseGrowth: val})}
                                    prefix="%"
                                />
                                <InputGroup 
                                    label="Sibling Childcare Discount (%)" 
                                    value={assumptions.childcareDiscount}
                                    onChange={(val) => setAssumptions({...assumptions, childcareDiscount: val})}
                                    prefix="%"
                                />
                                <InputGroup 
                                    label="Months Until Baby Arrives" 
                                    value={assumptions.monthsUntilBaby}
                                    onChange={(val) => setAssumptions({...assumptions, monthsUntilBaby: val})}
                                    prefix=""
                                />
                                <InputGroup 
                                    label="Maternity Leave (Months)" 
                                    value={assumptions.maternityLeaveMonths}
                                    onChange={(val) => setAssumptions({...assumptions, maternityLeaveMonths: val})}
                                    prefix=""
                                />
                                <InputGroup 
                                    label="Maternity Leave Pay (%)" 
                                    value={assumptions.maternityLeavePay}
                                    onChange={(val) => setAssumptions({...assumptions, maternityLeavePay: val})}
                                    prefix="%"
                                />
                            </div>
                        </div>

                        {/* Projections */}
                        <div className="bg-white rounded-lg shadow-lg p-6">
                            <h2 className="text-2xl font-bold text-gray-800 mb-6">5-Year Financial Projection</h2>
                            <div className="overflow-x-auto">
                                <table className="w-full">
                                    <thead>
                                        <tr className="border-b-2 border-gray-300">
                                            <th className="text-left py-3 px-4 font-semibold text-gray-700">Year</th>
                                            <th className="text-left py-3 px-4 font-semibold text-gray-700">Status</th>
                                            <th className="text-right py-3 px-4 font-semibold text-gray-700">Gross Income</th>
                                            <th className="text-right py-3 px-4 font-semibold text-gray-700">Pre-Tax Deductions</th>
                                            <th className="text-right py-3 px-4 font-semibold text-gray-700">Taxes</th>
                                            <th className="text-right py-3 px-4 font-semibold text-gray-700">Net Income</th>
                                            <th className="text-right py-3 px-4 font-semibold text-gray-700">Expenses</th>
                                            <th className="text-right py-3 px-4 font-semibold text-gray-700">Net Savings</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {projections.map((projection, index) => (
                                            <tr key={projection.year} className={index % 2 === 0 ? 'bg-gray-50' : ''}>
                                                <td className="py-3 px-4 font-medium">{projection.year}</td>
                                                <td className="py-3 px-4">
                                                    {projection.hasSecondChild ? (
                                                        <span className="inline-flex items-center gap-1 text-pink-600 font-medium">
                                                            <Baby /> 2 Children
                                                        </span>
                                                    ) : (
                                                        <span className="text-gray-600">1 Child</span>
                                                    )}
                                                </td>
                                                <td className="py-3 px-4 text-right font-medium text-gray-700">
                                                    {formatCurrency(projection.grossIncome)}
                                                </td>
                                                <td className="py-3 px-4 text-right font-medium text-orange-600">
                                                    -{formatCurrency(projection.preTaxDeductions)}
                                                </td>
                                                <td className="py-3 px-4 text-right font-medium text-orange-600">
                                                    -{formatCurrency(projection.taxes)}
                                                </td>
                                                <td className="py-3 px-4 text-right font-bold text-green-600">
                                                    {formatCurrency(projection.netIncome)}
                                                </td>
                                                <td className="py-3 px-4 text-right font-medium text-red-600">
                                                    -{formatCurrency(projection.expenses)}
                                                </td>
                                                <td className="py-3 px-4 text-right font-bold">
                                                    <span className={projection.netSavings >= 0 ? 'text-green-600' : 'text-red-600'}>
                                                        {projection.netSavings >= 0 ? (
                                                            <span className="inline-flex items-center gap-1">
                                                                <TrendingUp />
                                                                {formatCurrency(projection.netSavings)}
                                                            </span>
                                                        ) : (
                                                            <span className="inline-flex items-center gap-1">
                                                                <TrendingDown />
                                                                {formatCurrency(Math.abs(projection.netSavings))}
                                                            </span>
                                                        )}
                                                    </span>
                                                </td>
                                            </tr>
                                        ))}
                                    </tbody>
                                </table>
                            </div>

                            {/* Summary */}
                            <div className="mt-6 pt-6 border-t-2 border-gray-200">
                                <h3 className="text-lg font-bold text-gray-800 mb-4">5-Year Summary</h3>
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
                                    <div className="bg-gray-50 rounded-lg p-4 border border-gray-200">
                                        <div className="text-sm text-gray-700 font-medium mb-1">Total Gross Income</div>
                                        <div className="text-xl font-bold text-gray-700">
                                            {formatCurrency(projections.reduce((sum, p) => sum + p.grossIncome, 0))}
                                        </div>
                                    </div>
                                    <div className="bg-orange-50 rounded-lg p-4 border border-orange-200">
                                        <div className="text-sm text-orange-700 font-medium mb-1">Total Taxes & Deductions</div>
                                        <div className="text-xl font-bold text-orange-700">
                                            {formatCurrency(projections.reduce((sum, p) => sum + p.preTaxDeductions + p.taxes, 0))}
                                        </div>
                                    </div>
                                    <div className="bg-green-50 rounded-lg p-4 border border-green-200">
                                        <div className="text-sm text-green-700 font-medium mb-1">Total Net Income</div>
                                        <div className="text-xl font-bold text-green-700">
                                            {formatCurrency(projections.reduce((sum, p) => sum + p.netIncome, 0))}
                                        </div>
                                    </div>
                                    <div className="bg-red-50 rounded-lg p-4 border border-red-200">
                                        <div className="text-sm text-red-700 font-medium mb-1">Total Expenses</div>
                                        <div className="text-xl font-bold text-red-700">
                                            {formatCurrency(projections.reduce((sum, p) => sum + p.expenses, 0))}
                                        </div>
                                    </div>
                                    <div className="bg-blue-50 rounded-lg p-4 border border-blue-200">
                                        <div className="text-sm text-blue-700 font-medium mb-1">Net 5-Year Savings</div>
                                        <div className="text-xl font-bold text-blue-700">
                                            {formatCurrency(projections.reduce((sum, p) => sum + p.netSavings, 0))}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className="mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <p className="text-sm text-blue-800">
                                ðŸ’¡ <strong>Tip:</strong> All projections now include pre-tax deductions (401k, health insurance, HSA) and taxes (federal, state, FICA). 
                                The "Net Income" column shows your actual take-home pay after taxes and deductions. Adjust any values to explore different scenarios. 
                                Share this with your wife to discuss and refine your financial plans together!
                            </p>
                        </div>
                    </div>
                </div>
            );
        }

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<FamilyFinancialCalculator />);
    </script>
</body>
</html>